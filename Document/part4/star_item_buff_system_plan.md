# ìŠ¤íƒ€ ì•„ì´í…œ & ë²„í”„ ì„ íƒ ì‹œìŠ¤í…œ ê³„íšì„œ

## ê°œìš”

Enemyë¥¼ ì²˜ì¹˜í•˜ë©´ ë³„(Star) ì•„ì´í…œì„ ë“œë¡­í•˜ê³ , í”Œë ˆì´ì–´ê°€ ìˆ˜ì§‘í•˜ë©´ í¬ì¸íŠ¸ê°€ ì¦ê°€í•©ë‹ˆë‹¤.
ì¼ì • í¬ì¸íŠ¸ ë„ë‹¬ ì‹œ 3ê°€ì§€ ëœë¤ ë²„í”„ ì¤‘ 1ê°œë¥¼ ì„ íƒí•  ìˆ˜ ìˆìœ¼ë©°, ë™ì¼ ë²„í”„ ì¬ì„ íƒ ì‹œ ë ˆë²¨ì—…ë©ë‹ˆë‹¤.

---

## 1. ì‹œìŠ¤í…œ êµ¬ì„±ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ì „ì²´ ì‹œìŠ¤í…œ íë¦„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  [Enemy ì‚¬ë§] â”€â”€â†’ [Star ì•„ì´í…œ ìŠ¤í°] â”€â”€â†’ [í”Œë ˆì´ì–´ ìˆ˜ì§‘]              â”‚
â”‚                                              â”‚                      â”‚
â”‚                                              â–¼                      â”‚
â”‚                                    [í¬ì¸íŠ¸ ì¦ê°€]                     â”‚
â”‚                                              â”‚                      â”‚
â”‚                                              â–¼                      â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚                              â”‚ í¬ì¸íŠ¸ >= í•„ìš”ëŸ‰?        â”‚            â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                       â”‚ YES                         â”‚
â”‚                                       â–¼                             â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚                         â”‚   ë²„í”„ ì„ íƒ UI í‘œì‹œ       â”‚                â”‚
â”‚                         â”‚  (3ê°œ ëœë¤ ë²„í”„ ì˜µì…˜)     â”‚                â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                       â”‚                             â”‚
â”‚                                       â–¼                             â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚                         â”‚   í”Œë ˆì´ì–´ ë²„í”„ ì„ íƒ      â”‚                â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                       â”‚                             â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚                          â–¼                         â–¼                â”‚
â”‚                   [ì‹ ê·œ ë²„í”„ íšë“]           [ê¸°ì¡´ ë²„í”„ ë ˆë²¨ì—…]       â”‚
â”‚                    (ë ˆë²¨ 1)                  (ë ˆë²¨ +1)              â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ì»´í¬ë„ŒíŠ¸ ì„¤ê³„

### 2.1 Star ì•„ì´í…œ ì»´í¬ë„ŒíŠ¸

```csharp
// Assets/Scripts/Components/Items/StarTag.cs
public struct StarTag : IComponentData { }

// Assets/Scripts/Components/Items/StarValue.cs
public struct StarValue : IComponentData
{
    public int Value;  // í¬ì¸íŠ¸ ê°’ (ê¸°ë³¸ 1)
}

// Assets/Scripts/Components/Items/MagnetTarget.cs
// ìì„ íš¨ê³¼ ëŒ€ìƒ (ë‚˜ì¤‘ì— ìì„ ë²„í”„ êµ¬í˜„ ì‹œ ì‚¬ìš©)
public struct MagnetTarget : IComponentData
{
    public Entity TargetPlayer;
    public float AttractionSpeed;
}
```

### 2.2 í”Œë ˆì´ì–´ í¬ì¸íŠ¸ ì»´í¬ë„ŒíŠ¸

```csharp
// Assets/Scripts/Components/PlayerStarPoints.cs
public struct PlayerStarPoints : IComponentData
{
    [GhostField] public int CurrentPoints;      // í˜„ì¬ í¬ì¸íŠ¸
    [GhostField] public int TotalCollected;     // ì´ ìˆ˜ì§‘ëŸ‰
    [GhostField] public int NextBuffThreshold;  // ë‹¤ìŒ ë²„í”„ í•„ìš” í¬ì¸íŠ¸
    [GhostField] public int BuffSelectionCount; // ë²„í”„ ì„ íƒ íšŸìˆ˜
}
```

### 2.3 ë²„í”„ ì‹œìŠ¤í…œ ì»´í¬ë„ŒíŠ¸

```csharp
// Assets/Scripts/Components/Buffs/PlayerBuffs.cs
public struct PlayerBuffs : IComponentData
{
    // ê° ë²„í”„ì˜ ë ˆë²¨ (0 = ë¯¸íšë“, 1~5 = ë ˆë²¨)
    [GhostField] public int DamageLevel;           // ë°ë¯¸ì§€ ì¦ê°€
    [GhostField] public int SpeedLevel;            // ì´ë™ ì†ë„ ì¦ê°€
    [GhostField] public int FireRateLevel;         // ê³µê²© ì†ë„ ì¦ê°€
    [GhostField] public int MissileCountLevel;     // ë¯¸ì‚¬ì¼ ê°œìˆ˜ ì¦ê°€
    [GhostField] public int MagnetLevel;           // ìì„ íš¨ê³¼
    [GhostField] public int HealthRegenLevel;      // ì²´ë ¥ ì¬ìƒ
    [GhostField] public int MaxHealthLevel;        // ìµœëŒ€ ì²´ë ¥ ì¦ê°€
    [GhostField] public int CriticalLevel;         // ì¹˜ëª…íƒ€ í™•ë¥ 
}

// Assets/Scripts/Components/Buffs/BuffSelectionRequest.cs
// ë²„í”„ ì„ íƒ UI í‘œì‹œ ìš”ì²­
public struct BuffSelectionRequest : IComponentData
{
    public bool IsActive;
    public int Option1;  // ë²„í”„ íƒ€ì… ì¸ë±ìŠ¤
    public int Option2;
    public int Option3;
}
```

---

## 3. ë²„í”„ ì¢…ë¥˜ ë° íš¨ê³¼

### 3.1 ë²„í”„ íƒ€ì… ì •ì˜

```csharp
// Assets/Scripts/Buffs/BuffType.cs
public enum BuffType
{
    Damage = 0,        // ë°ë¯¸ì§€ ì¦ê°€
    Speed = 1,         // ì´ë™ ì†ë„ ì¦ê°€
    FireRate = 2,      // ê³µê²© ì†ë„ ì¦ê°€
    MissileCount = 3,  // ë¯¸ì‚¬ì¼ ê°œìˆ˜ ì¦ê°€
    Magnet = 4,        // ìì„ íš¨ê³¼ (ì•„ì´í…œ í¡ìˆ˜)
    HealthRegen = 5,   // ì²´ë ¥ ì¬ìƒ
    MaxHealth = 6,     // ìµœëŒ€ ì²´ë ¥ ì¦ê°€
    Critical = 7,      // ì¹˜ëª…íƒ€ í™•ë¥ 
}
```

### 3.2 ë ˆë²¨ë³„ íš¨ê³¼ ìˆ˜ì¹˜

| ë²„í”„ íƒ€ì… | Lv1 | Lv2 | Lv3 | Lv4 | Lv5 (MAX) |
|-----------|-----|-----|-----|-----|-----------|
| **ë°ë¯¸ì§€ ì¦ê°€** | +10% | +20% | +35% | +50% | +75% |
| **ì´ë™ ì†ë„** | +10% | +20% | +30% | +40% | +50% |
| **ê³µê²© ì†ë„** | +15% | +30% | +45% | +60% | +80% |
| **ë¯¸ì‚¬ì¼ ê°œìˆ˜** | +1 | +2 | +3 | +4 | +6 |
| **ìì„ íš¨ê³¼** | ë²”ìœ„ 3 | ë²”ìœ„ 5 | ë²”ìœ„ 7 | ë²”ìœ„ 10 | ë²”ìœ„ 15 |
| **ì²´ë ¥ ì¬ìƒ** | 1/s | 2/s | 3/s | 5/s | 8/s |
| **ìµœëŒ€ ì²´ë ¥** | +20 | +40 | +70 | +100 | +150 |
| **ì¹˜ëª…íƒ€** | 5% (2x) | 10% (2x) | 15% (2.5x) | 20% (2.5x) | 30% (3x) |

---

## 4. ì‹œìŠ¤í…œ ì„¤ê³„

### 4.1 Star ìŠ¤í° ì‹œìŠ¤í…œ

```csharp
// Assets/Scripts/Systems/Items/StarSpawnSystem.cs
// ìœ„ì¹˜: BulletHitSystemì—ì„œ Enemy ì‚¬ë§ ì‹œ í˜¸ì¶œ

[UpdateInGroup(typeof(SimulationSystemGroup))]
[UpdateAfter(typeof(BulletHitSystem))]
[WorldSystemFilter(WorldSystemFilterFlags.ServerSimulation)]
public partial struct StarSpawnSystem : ISystem
{
    // Enemy ì‚¬ë§ ìœ„ì¹˜ì— Star Entity ìƒì„±
    // - StarTag, StarValue ì»´í¬ë„ŒíŠ¸ ì¶”ê°€
    // - ë„¤íŠ¸ì›Œí¬ ë™ê¸°í™” (Ghost)
}
```

### 4.2 Star ìˆ˜ì§‘ ì‹œìŠ¤í…œ

```csharp
// Assets/Scripts/Systems/Items/StarCollectSystem.cs

[UpdateInGroup(typeof(SimulationSystemGroup))]
[WorldSystemFilter(WorldSystemFilterFlags.ServerSimulation)]
public partial struct StarCollectSystem : ISystem
{
    // í”Œë ˆì´ì–´ì™€ Star ê±°ë¦¬ ì²´í¬
    // ìˆ˜ì§‘ ì‹œ:
    //   1. PlayerStarPoints.CurrentPoints ì¦ê°€
    //   2. Star Entity ì‚­ì œ
    //   3. ìˆ˜ì§‘ ì´í™íŠ¸ RPC ì „ì†¡
    //   4. í¬ì¸íŠ¸ >= NextBuffThreshold ì²´í¬
}
```

### 4.3 ìì„ íš¨ê³¼ ì‹œìŠ¤í…œ

```csharp
// Assets/Scripts/Systems/Items/MagnetSystem.cs

[UpdateInGroup(typeof(SimulationSystemGroup))]
[UpdateBefore(typeof(StarCollectSystem))]
[WorldSystemFilter(WorldSystemFilterFlags.ServerSimulation)]
public partial struct MagnetSystem : ISystem
{
    // ìì„ ë²„í”„ ë³´ìœ  í”Œë ˆì´ì–´ ì£¼ë³€ì˜ Starë¥¼
    // í”Œë ˆì´ì–´ ë°©í–¥ìœ¼ë¡œ ëŒì–´ë‹¹ê¹€
    // - MagnetLevelì— ë”°ë¼ ë²”ìœ„/ì†ë„ ê²°ì •
}
```

### 4.4 ë²„í”„ ì„ íƒ ì‹œìŠ¤í…œ

```csharp
// Assets/Scripts/Systems/Buffs/BuffSelectionSystem.cs

[UpdateInGroup(typeof(SimulationSystemGroup))]
[WorldSystemFilter(WorldSystemFilterFlags.ServerSimulation)]
public partial struct BuffSelectionSystem : ISystem
{
    // í¬ì¸íŠ¸ ë„ë‹¬ ì‹œ:
    //   1. ê²Œì„ ì¼ì‹œì •ì§€ (Time.timeScale = 0 ë˜ëŠ” ë³„ë„ í”Œë˜ê·¸)
    //   2. 8ê°œ ë²„í”„ ì¤‘ ëœë¤ 3ê°œ ì„ íƒ
    //   3. BuffSelectionRequest ì»´í¬ë„ŒíŠ¸ í™œì„±í™”
    //   4. ì„ íƒ ëŒ€ê¸°
}
```

### 4.5 ë²„í”„ ì ìš© ì‹œìŠ¤í…œ

```csharp
// Assets/Scripts/Systems/Buffs/BuffApplySystem.cs

[UpdateInGroup(typeof(SimulationSystemGroup))]
[WorldSystemFilter(WorldSystemFilterFlags.ServerSimulation)]
public partial struct BuffApplySystem : ISystem
{
    // ë²„í”„ ì„ íƒ RPC ìˆ˜ì‹  ì‹œ:
    //   1. í•´ë‹¹ ë²„í”„ ë ˆë²¨ +1
    //   2. ì‹¤ì œ ìŠ¤íƒ¯ì— íš¨ê³¼ ì ìš©
    //   3. NextBuffThreshold ì¦ê°€
    //   4. ê²Œì„ ì¬ê°œ
}
```

---

## 5. UI ì„¤ê³„

### 5.1 ë²„í”„ ì„ íƒ UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ë ˆë²¨ ì—…!                                 â”‚
â”‚                  ë²„í”„ë¥¼ ì„ íƒí•˜ì„¸ìš”                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   âš”ï¸ ë°ë¯¸ì§€  â”‚  â”‚   ğŸƒ ì†ë„   â”‚  â”‚   ğŸš€ ë¯¸ì‚¬ì¼ â”‚         â”‚
â”‚  â”‚   ì¦ê°€      â”‚  â”‚   ì¦ê°€      â”‚  â”‚   +1       â”‚         â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚         â”‚
â”‚  â”‚  Lv.1â†’Lv.2  â”‚  â”‚  ì‹ ê·œ íšë“  â”‚  â”‚  Lv.2â†’Lv.3  â”‚         â”‚
â”‚  â”‚  +10%â†’+20%  â”‚  â”‚   +10%     â”‚  â”‚  +2â†’+3ê°œ   â”‚         â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚         â”‚
â”‚  â”‚   [ì„ íƒ]    â”‚  â”‚   [ì„ íƒ]    â”‚  â”‚   [ì„ íƒ]    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 í˜„ì¬ ë²„í”„ í‘œì‹œ (HUD)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš”ï¸ Lv.2  ğŸƒ Lv.1  ğŸš€ Lv.3   â”‚  â† í™”ë©´ ìƒë‹¨ì— ì•„ì´ì½˜ìœ¼ë¡œ í‘œì‹œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 UI ì»´í¬ë„ŒíŠ¸

```csharp
// Assets/Scripts/UI/BuffSelectionUI.cs (MonoBehaviour)
public class BuffSelectionUI : MonoBehaviour
{
    public GameObject Panel;
    public BuffOptionCard[] OptionCards;  // 3ê°œ

    public void Show(BuffType[] options, int[] currentLevels);
    public void Hide();
    public event Action<int> OnBuffSelected;  // ì„ íƒëœ ì˜µì…˜ ì¸ë±ìŠ¤
}

// Assets/Scripts/UI/BuffOptionCard.cs
public class BuffOptionCard : MonoBehaviour
{
    public Image IconImage;
    public TextMeshProUGUI NameText;
    public TextMeshProUGUI LevelText;
    public TextMeshProUGUI EffectText;
    public Button SelectButton;
}
```

---

## 6. ë„¤íŠ¸ì›Œí¬ ë™ê¸°í™”

### 6.1 RPC ì •ì˜

```csharp
// Star ìˆ˜ì§‘ ì´í™íŠ¸ (Server â†’ Client)
public struct StarCollectRpc : IRpcCommand
{
    public float3 Position;
    public int Value;
}

// ë²„í”„ ì„ íƒ UI í‘œì‹œ ìš”ì²­ (Server â†’ Client)
public struct ShowBuffSelectionRpc : IRpcCommand
{
    public int Option1BuffType;
    public int Option1CurrentLevel;
    public int Option2BuffType;
    public int Option2CurrentLevel;
    public int Option3BuffType;
    public int Option3CurrentLevel;
}

// ë²„í”„ ì„ íƒ ê²°ê³¼ (Client â†’ Server)
public struct BuffSelectedRpc : IRpcCommand
{
    public int SelectedOptionIndex;  // 0, 1, 2
}

// ë²„í”„ ì ìš© ì•Œë¦¼ (Server â†’ Client)
public struct BuffAppliedRpc : IRpcCommand
{
    public int BuffType;
    public int NewLevel;
}
```

### 6.2 Ghost ì»´í¬ë„ŒíŠ¸

| ì»´í¬ë„ŒíŠ¸ | GhostMode | ì„¤ëª… |
|---------|-----------|------|
| `PlayerStarPoints` | AllPredicted | í¬ì¸íŠ¸ ë™ê¸°í™” |
| `PlayerBuffs` | AllPredicted | ë²„í”„ ë ˆë²¨ ë™ê¸°í™” |
| `StarTag` | Server | ì„œë²„ì—ì„œë§Œ ê´€ë¦¬ |

---

## 7. êµ¬í˜„ ìˆœì„œ

### Phase 1: ê¸°ë³¸ Star ì‹œìŠ¤í…œ (1ë‹¨ê³„)
1. [ ] Star í”„ë¦¬íŒ¹ ìƒì„± (ì‹œê°ì  ëª¨ë¸ + Collider)
2. [ ] StarTag, StarValue ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
3. [ ] StarAuthoring êµ¬í˜„
4. [ ] BulletHitSystem ìˆ˜ì • - Enemy ì‚¬ë§ ì‹œ Star ìŠ¤í°
5. [ ] StarCollectSystem êµ¬í˜„ - ìˆ˜ì§‘ ë¡œì§
6. [ ] PlayerStarPoints ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
7. [ ] UIì— í¬ì¸íŠ¸ í‘œì‹œ ì¶”ê°€

### Phase 2: ë²„í”„ ì‹œìŠ¤í…œ (2ë‹¨ê³„)
1. [ ] BuffType enum ë° ë²„í”„ ë°ì´í„° ì •ì˜
2. [ ] PlayerBuffs ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
3. [ ] BuffSelectionSystem êµ¬í˜„ - ëœë¤ 3ê°œ ì„ íƒ
4. [ ] BuffApplySystem êµ¬í˜„ - ë²„í”„ íš¨ê³¼ ì ìš©
5. [ ] ê¸°ì¡´ ì‹œìŠ¤í…œ ìˆ˜ì •:
   - [ ] AutoShootSystem - ë°ë¯¸ì§€/ë°œì‚¬ì†ë„/ë¯¸ì‚¬ì¼ê°œìˆ˜ ë²„í”„ ì ìš©
   - [ ] PlayerMovementSystem - ì´ë™ì†ë„ ë²„í”„ ì ìš©
   - [ ] PlayerAuthoring - ìµœëŒ€ì²´ë ¥ ë²„í”„ ì ìš©

### Phase 3: ë²„í”„ ì„ íƒ UI (3ë‹¨ê³„)
1. [ ] BuffSelectionUI í”„ë¦¬íŒ¹ ìƒì„±
2. [ ] BuffOptionCard ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
3. [ ] ë²„í”„ ì•„ì´ì½˜ ì—ì…‹ ì¤€ë¹„
4. [ ] UIManagerì— ë²„í”„ ì„ íƒ UI ì—°ë™
5. [ ] ê²Œì„ ì¼ì‹œì •ì§€/ì¬ê°œ ë¡œì§

### Phase 4: ìì„ íš¨ê³¼ & í´ë¦¬ì‹± (4ë‹¨ê³„)
1. [ ] MagnetSystem êµ¬í˜„
2. [ ] Star ìˆ˜ì§‘ ì´í™íŠ¸
3. [ ] ë²„í”„ íšë“ ì´í™íŠ¸
4. [ ] HUD ë²„í”„ ì•„ì´ì½˜ í‘œì‹œ
5. [ ] ì‚¬ìš´ë“œ íš¨ê³¼

### Phase 5: ë„¤íŠ¸ì›Œí¬ í†µí•© (5ë‹¨ê³„)
1. [ ] RPC êµ¬í˜„ ë° í…ŒìŠ¤íŠ¸
2. [ ] ë©€í‹°í”Œë ˆì´ì–´ ë™ê¸°í™” ê²€ì¦
3. [ ] ë²„í”„ ì„ íƒ ì‹œ ê²Œì„ ì¼ì‹œì •ì§€ ë™ê¸°í™”

---

## 8. íŒŒì¼ êµ¬ì¡°

```
Assets/Scripts/
â”œâ”€â”€ Components/
â”‚   â”œâ”€â”€ Items/
â”‚   â”‚   â”œâ”€â”€ StarTag.cs
â”‚   â”‚   â”œâ”€â”€ StarValue.cs
â”‚   â”‚   â””â”€â”€ MagnetTarget.cs
â”‚   â”œâ”€â”€ Buffs/
â”‚   â”‚   â”œâ”€â”€ PlayerBuffs.cs
â”‚   â”‚   â””â”€â”€ BuffSelectionRequest.cs
â”‚   â””â”€â”€ PlayerStarPoints.cs
â”‚
â”œâ”€â”€ Systems/
â”‚   â”œâ”€â”€ Items/
â”‚   â”‚   â”œâ”€â”€ StarSpawnSystem.cs
â”‚   â”‚   â”œâ”€â”€ StarCollectSystem.cs
â”‚   â”‚   â””â”€â”€ MagnetSystem.cs
â”‚   â””â”€â”€ Buffs/
â”‚       â”œâ”€â”€ BuffSelectionSystem.cs
â”‚       â””â”€â”€ BuffApplySystem.cs
â”‚
â”œâ”€â”€ Authoring/
â”‚   â””â”€â”€ StarAuthoring.cs
â”‚
â”œâ”€â”€ Buffs/
â”‚   â”œâ”€â”€ BuffType.cs
â”‚   â””â”€â”€ BuffDataConfig.cs (ScriptableObject)
â”‚
â”œâ”€â”€ UI/
â”‚   â”œâ”€â”€ BuffSelectionUI.cs
â”‚   â””â”€â”€ BuffOptionCard.cs
â”‚
â””â”€â”€ Network/
    â”œâ”€â”€ StarCollectRpc.cs
    â”œâ”€â”€ ShowBuffSelectionRpc.cs
    â”œâ”€â”€ BuffSelectedRpc.cs
    â””â”€â”€ BuffAppliedRpc.cs
```

---

## 9. ë°¸ëŸ°ì‹± ê³ ë ¤ì‚¬í•­

### í¬ì¸íŠ¸ í•„ìš”ëŸ‰ (ë ˆë²¨ì—… ê³¡ì„ )

| ë²„í”„ ì„ íƒ íšŸìˆ˜ | í•„ìš” í¬ì¸íŠ¸ | ëˆ„ì  í¬ì¸íŠ¸ |
|---------------|------------|------------|
| 1ì°¨ | 10 | 10 |
| 2ì°¨ | 15 | 25 |
| 3ì°¨ | 20 | 45 |
| 4ì°¨ | 30 | 75 |
| 5ì°¨ | 40 | 115 |
| 6ì°¨+ | +15ì”© ì¦ê°€ | ... |

### Star ë“œë¡­ë¥ 

- ì¼ë°˜ Enemy: 1ê°œ (100%)
- ì—˜ë¦¬íŠ¸ Enemy (ì¶”í›„): 3ê°œ
- ë³´ìŠ¤ (ì¶”í›„): 10ê°œ

---

## 10. ë²„í”„ íš¨ê³¼ ì•„í‚¤í…ì²˜ (í™•ì¥ ê°€ëŠ¥í•œ ì„¤ê³„)

### 10.1 ì„¤ê³„ ì›ì¹™

ë²„í”„ ì‹œìŠ¤í…œì€ ë‹¤ìŒ ì›ì¹™ì„ ë”°ë¦…ë‹ˆë‹¤:

1. **ë‹¨ì¼ ì±…ì„ ì›ì¹™ (SRP)**: ê° ë²„í”„ íš¨ê³¼ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì§
2. **ê°œë°©-íì‡„ ì›ì¹™ (OCP)**: ìƒˆ ë²„í”„ ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ì—†ì´ í™•ì¥ ê°€ëŠ¥
3. **ë°ì´í„° ì£¼ë„ ì„¤ê³„**: ë²„í”„ ìˆ˜ì¹˜ëŠ” ì½”ë“œê°€ ì•„ë‹Œ ë°ì´í„°ë¡œ ê´€ë¦¬
4. **ECS ì¹œí™”ì **: Unity DOTS íŒ¨í„´ê³¼ ìì—°ìŠ¤ëŸ½ê²Œ í†µí•©

### 10.2 ì•„í‚¤í…ì²˜ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ë²„í”„ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚  â”‚ BuffDefinition  â”‚ â† ScriptableObject (ë²„í”„ ë©”íƒ€ë°ì´í„° ì •ì˜)               â”‚
â”‚  â”‚ - BuffType      â”‚                                                        â”‚
â”‚  â”‚ - TargetStat    â”‚                                                        â”‚
â”‚  â”‚ - LevelValues[] â”‚                                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚           â”‚                                                                 â”‚
â”‚           â–¼                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ BuffRegistry    â”‚ â”€â”€â†’ â”‚ IBuffEffect     â”‚ â†â”€â”€ â”‚ BuffEffectBase  â”‚       â”‚
â”‚  â”‚ (Singleton)     â”‚     â”‚ (Interface)     â”‚     â”‚ (Abstract)      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚           â”‚                       â–²                       â”‚                 â”‚
â”‚           â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚                 â”‚
â”‚           â”‚           â”‚           â”‚           â”‚           â”‚                 â”‚
â”‚           â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”        â”‚                 â”‚
â”‚           â”‚    â”‚ Damage  â”‚ â”‚ Speed   â”‚ â”‚ Magnet  â”‚ ...    â”‚ (êµ¬ì²´ êµ¬í˜„ì²´)    â”‚
â”‚           â”‚    â”‚ Effect  â”‚ â”‚ Effect  â”‚ â”‚ Effect  â”‚        â”‚                 â”‚
â”‚           â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚                 â”‚
â”‚           â”‚                                               â”‚                 â”‚
â”‚           â–¼                                               â–¼                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                    BuffModifierSystem (ECS)                      â”‚       â”‚
â”‚  â”‚  - ë§¤ í”„ë ˆì„ í™œì„± ë²„í”„ ìˆœíšŒ                                        â”‚       â”‚
â”‚  â”‚  - IBuffEffect.CalculateModifier() í˜¸ì¶œ                          â”‚       â”‚
â”‚  â”‚  - ìµœì¢… ìŠ¤íƒ¯ = ê¸°ë³¸ê°’ Ã— (1 + í•©ì‚° ë°°ìœ¨) + ê°€ì‚° ë³´ë„ˆìŠ¤               â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 10.3 í•µì‹¬ ì¸í„°í˜ì´ìŠ¤ ë° ê¸°ë³¸ í´ë˜ìŠ¤

#### 10.3.1 ë²„í”„ íš¨ê³¼ ì¸í„°í˜ì´ìŠ¤

```csharp
// Assets/Scripts/Buffs/Core/IBuffEffect.cs
public interface IBuffEffect
{
    BuffType BuffType { get; }
    StatType TargetStat { get; }
    StatModifier CalculateModifier(int level, in BuffContext context);
    void OnApply(int level, ref EntityCommandBuffer ecb, Entity target);
    void OnLevelUp(int oldLevel, int newLevel, ref EntityCommandBuffer ecb, Entity target);
}
```

#### 10.3.2 ìŠ¤íƒ¯ ìˆ˜ì •ì êµ¬ì¡°ì²´

```csharp
// Assets/Scripts/Buffs/Core/StatModifier.cs
public struct StatModifier
{
    public float Additive;        // ê°€ì‚° ë³´ë„ˆìŠ¤ (ì˜ˆ: MaxHealth +50)
    public float Multiplicative;  // ìŠ¹ì‚° ë°°ìœ¨ (0.1 = 10% ì¦ê°€)
    public float FinalMultiplier; // ìµœì¢… ìŠ¹ì‚° (ì˜ˆ: ì¹˜ëª…íƒ€ 2ë°°)

    public static StatModifier None => new StatModifier
    { Additive = 0f, Multiplicative = 0f, FinalMultiplier = 1f };

    public static StatModifier Percent(float percent) => new StatModifier
    { Additive = 0f, Multiplicative = percent / 100f, FinalMultiplier = 1f };

    public static StatModifier Flat(float value) => new StatModifier
    { Additive = value, Multiplicative = 0f, FinalMultiplier = 1f };
}
```

#### 10.3.3 ìŠ¤íƒ¯ íƒ€ì… ì—´ê±°í˜•

```csharp
// Assets/Scripts/Buffs/Core/StatType.cs
public enum StatType
{
    None = 0,
    // ê³µê²© ê´€ë ¨
    Damage = 1, FireRate = 2, MissileCount = 3,
    CriticalChance = 4, CriticalMultiplier = 5,
    // ì´ë™ ê´€ë ¨
    MovementSpeed = 10,
    // ìƒì¡´ ê´€ë ¨
    MaxHealth = 20, HealthRegen = 21,
    // ìœ í‹¸ë¦¬í‹°
    MagnetRange = 30, MagnetSpeed = 31,
}
```

---

### 10.4 ì¶”ìƒ ê¸°ë³¸ í´ë˜ìŠ¤

```csharp
// Assets/Scripts/Buffs/Core/BuffEffectBase.cs
public abstract class BuffEffectBase : IBuffEffect
{
    public abstract BuffType BuffType { get; }
    public abstract StatType TargetStat { get; }
    protected abstract float[] LevelValues { get; }
    protected virtual ModifierType ModifierType => ModifierType.Multiplicative;

    public virtual StatModifier CalculateModifier(int level, in BuffContext context)
    {
        if (level <= 0 || level > LevelValues.Length)
            return StatModifier.None;

        float value = LevelValues[level - 1];
        return ModifierType switch
        {
            ModifierType.Additive => StatModifier.Flat(value),
            ModifierType.Multiplicative => StatModifier.Percent(value),
            _ => StatModifier.None
        };
    }

    public virtual void OnApply(int level, ref EntityCommandBuffer ecb, Entity target) { }
    public virtual void OnLevelUp(int oldLevel, int newLevel,
                                   ref EntityCommandBuffer ecb, Entity target) { }
}

public enum ModifierType { Additive, Multiplicative }
```

---

### 10.5 êµ¬ì²´ì ì¸ ë²„í”„ íš¨ê³¼ êµ¬í˜„ ì˜ˆì‹œ

#### ë°ë¯¸ì§€ ë²„í”„ (ìŠ¹ì‚° ë°©ì‹)

```csharp
// Assets/Scripts/Buffs/Effects/DamageBuffEffect.cs
public class DamageBuffEffect : BuffEffectBase
{
    public override BuffType BuffType => BuffType.Damage;
    public override StatType TargetStat => StatType.Damage;
    protected override float[] LevelValues => new[] { 10f, 20f, 35f, 50f, 75f };
    protected override ModifierType ModifierType => ModifierType.Multiplicative;
}
```

#### ë¯¸ì‚¬ì¼ ê°œìˆ˜ ë²„í”„ (ê°€ì‚° ë°©ì‹)

```csharp
// Assets/Scripts/Buffs/Effects/MissileCountBuffEffect.cs
public class MissileCountBuffEffect : BuffEffectBase
{
    public override BuffType BuffType => BuffType.MissileCount;
    public override StatType TargetStat => StatType.MissileCount;
    protected override float[] LevelValues => new[] { 1f, 2f, 3f, 4f, 6f };
    protected override ModifierType ModifierType => ModifierType.Additive;
}
```

#### ì¹˜ëª…íƒ€ ë²„í”„ (ë³µí•© íš¨ê³¼ - í™•ë¥  + ë°°ìœ¨)

```csharp
// Assets/Scripts/Buffs/Effects/CriticalBuffEffect.cs
public class CriticalBuffEffect : IBuffEffect
{
    public BuffType BuffType => BuffType.Critical;
    public StatType TargetStat => StatType.CriticalChance;

    private static readonly float[] ChanceValues = { 5f, 10f, 15f, 20f, 30f };
    private static readonly float[] MultiplierValues = { 2.0f, 2.0f, 2.5f, 2.5f, 3.0f };

    public StatModifier CalculateModifier(int level, in BuffContext context)
    {
        if (level <= 0 || level > ChanceValues.Length)
            return StatModifier.None;

        return new StatModifier
        {
            Additive = ChanceValues[level - 1],
            Multiplicative = 0f,
            FinalMultiplier = MultiplierValues[level - 1]
        };
    }

    public void OnApply(int level, ref EntityCommandBuffer ecb, Entity target) { }
    public void OnLevelUp(int oldLevel, int newLevel,
                          ref EntityCommandBuffer ecb, Entity target) { }
}
```

#### ìµœëŒ€ ì²´ë ¥ ë²„í”„ (ì¦‰ì‹œ íš¨ê³¼ í¬í•¨)

```csharp
// Assets/Scripts/Buffs/Effects/MaxHealthBuffEffect.cs
public class MaxHealthBuffEffect : BuffEffectBase
{
    public override BuffType BuffType => BuffType.MaxHealth;
    public override StatType TargetStat => StatType.MaxHealth;
    protected override float[] LevelValues => new[] { 20f, 40f, 70f, 100f, 150f };
    protected override ModifierType ModifierType => ModifierType.Additive;

    public override void OnLevelUp(int oldLevel, int newLevel,
                                    ref EntityCommandBuffer ecb, Entity target)
    {
        // ìµœëŒ€ ì²´ë ¥ ì¦ê°€ ì‹œ í˜„ì¬ ì²´ë ¥ë„ ì¦ê°€ë¶„ë§Œí¼ íšŒë³µ
        float oldBonus = oldLevel > 0 ? LevelValues[oldLevel - 1] : 0f;
        float healthGain = LevelValues[newLevel - 1] - oldBonus;
        ecb.AddComponent(target, new HealRequest { Amount = healthGain });
    }
}
```

---

### 10.6 ë²„í”„ ë ˆì§€ìŠ¤íŠ¸ë¦¬ (ì¤‘ì•™ ê´€ë¦¬)

```csharp
// Assets/Scripts/Buffs/Core/BuffRegistry.cs
public class BuffRegistry
{
    private static BuffRegistry _instance;
    public static BuffRegistry Instance => _instance ??= new BuffRegistry();

    private readonly Dictionary<BuffType, IBuffEffect> _effects = new();
    private readonly Dictionary<StatType, List<BuffType>> _statToBuffs = new();

    private BuffRegistry()
    {
        Register(new DamageBuffEffect());
        Register(new SpeedBuffEffect());
        Register(new FireRateBuffEffect());
        Register(new MissileCountBuffEffect());
        Register(new MagnetBuffEffect());
        Register(new HealthRegenBuffEffect());
        Register(new MaxHealthBuffEffect());
        Register(new CriticalBuffEffect());
    }

    public void Register(IBuffEffect effect)
    {
        _effects[effect.BuffType] = effect;
        if (!_statToBuffs.TryGetValue(effect.TargetStat, out var list))
        {
            list = new List<BuffType>();
            _statToBuffs[effect.TargetStat] = list;
        }
        list.Add(effect.BuffType);
    }

    public IBuffEffect GetEffect(BuffType type) =>
        _effects.TryGetValue(type, out var effect) ? effect : null;
}
```

---

### 10.7 ìŠ¤íƒ¯ ê³„ì‚° ì‹œìŠ¤í…œ (ECS í†µí•©)

#### ìŠ¤íƒ¯ ìˆ˜ì •ì ì»´í¬ë„ŒíŠ¸

```csharp
// Assets/Scripts/Components/Buffs/StatModifiers.cs
[GhostComponent(PrefabType = GhostPrefabType.AllPredicted)]
public struct StatModifiers : IComponentData
{
    [GhostField] public float DamageMultiplier;      // 1.0 = 100%
    [GhostField] public float FireRateMultiplier;    // 0.8 = 20% ë¹ ë¦„
    [GhostField] public int BonusMissileCount;
    [GhostField] public float SpeedMultiplier;
    [GhostField] public float BonusMaxHealth;
    [GhostField] public float HealthRegenPerSecond;
    [GhostField] public float CriticalChance;        // 0~100
    [GhostField] public float CriticalMultiplier;    // 2.0 = 2ë°°
    [GhostField] public float MagnetRange;

    public static StatModifiers Default => new StatModifiers
    {
        DamageMultiplier = 1f, FireRateMultiplier = 1f, BonusMissileCount = 0,
        SpeedMultiplier = 1f, BonusMaxHealth = 0f, HealthRegenPerSecond = 0f,
        CriticalChance = 0f, CriticalMultiplier = 1f, MagnetRange = 0f
    };
}
```

#### ìŠ¤íƒ¯ ê³„ì‚° ì‹œìŠ¤í…œ

```csharp
// Assets/Scripts/Systems/Buffs/StatCalculationSystem.cs
[UpdateInGroup(typeof(SimulationSystemGroup))]
[UpdateBefore(typeof(AutoShootSystem))]
[UpdateBefore(typeof(PlayerMovementSystem))]
[WorldSystemFilter(WorldSystemFilterFlags.ServerSimulation)]
[BurstCompile]
public partial struct StatCalculationSystem : ISystem
{
    [BurstCompile]
    public void OnUpdate(ref SystemState state)
    {
        foreach (var (buffs, modifiers) in
                 SystemAPI.Query<RefRO<PlayerBuffLevels>, RefRW<StatModifiers>>()
                     .WithAll<PlayerTag>())
        {
            var levels = buffs.ValueRO;
            ref var stats = ref modifiers.ValueRW;

            stats.DamageMultiplier = 1f + GetDamageMultiplier(levels.DamageLevel);
            stats.FireRateMultiplier = 1f - GetFireRateReduction(levels.FireRateLevel);
            stats.BonusMissileCount = GetMissileBonus(levels.MissileCountLevel);
            stats.SpeedMultiplier = 1f + GetSpeedMultiplier(levels.SpeedLevel);
            stats.BonusMaxHealth = GetMaxHealthBonus(levels.MaxHealthLevel);
            stats.HealthRegenPerSecond = GetHealthRegen(levels.HealthRegenLevel);
            stats.MagnetRange = GetMagnetRange(levels.MagnetLevel);

            var (chance, mult) = GetCriticalStats(levels.CriticalLevel);
            stats.CriticalChance = chance;
            stats.CriticalMultiplier = mult;
        }
    }

    // Burst í˜¸í™˜ ì¸ë¼ì¸ í•¨ìˆ˜ë“¤
    private static float GetDamageMultiplier(int level) => level switch
    { 1 => 0.10f, 2 => 0.20f, 3 => 0.35f, 4 => 0.50f, 5 => 0.75f, _ => 0f };

    private static float GetFireRateReduction(int level) => level switch
    { 1 => 0.15f, 2 => 0.30f, 3 => 0.45f, 4 => 0.60f, 5 => 0.80f, _ => 0f };

    private static int GetMissileBonus(int level) => level switch
    { 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 6, _ => 0 };

    private static float GetSpeedMultiplier(int level) => level switch
    { 1 => 0.10f, 2 => 0.20f, 3 => 0.30f, 4 => 0.40f, 5 => 0.50f, _ => 0f };

    private static float GetMaxHealthBonus(int level) => level switch
    { 1 => 20f, 2 => 40f, 3 => 70f, 4 => 100f, 5 => 150f, _ => 0f };

    private static float GetHealthRegen(int level) => level switch
    { 1 => 1f, 2 => 2f, 3 => 3f, 4 => 5f, 5 => 8f, _ => 0f };

    private static float GetMagnetRange(int level) => level switch
    { 1 => 3f, 2 => 5f, 3 => 7f, 4 => 10f, 5 => 15f, _ => 0f };

    private static (float, float) GetCriticalStats(int level) => level switch
    { 1 => (5f, 2.0f), 2 => (10f, 2.0f), 3 => (15f, 2.5f),
      4 => (20f, 2.5f), 5 => (30f, 3.0f), _ => (0f, 1f) };
}
```

---

### 10.8 ê¸°ì¡´ ì‹œìŠ¤í…œì— ë²„í”„ ì ìš© ì˜ˆì‹œ

#### AutoShootSystem ìˆ˜ì •

```csharp
foreach (var (shootConfig, transform, modifiers) in
         SystemAPI.Query<RefRW<AutoShootConfig>, RefRO<LocalTransform>, RefRO<StatModifiers>>()
             .WithAll<PlayerTag>().WithDisabled<PlayerDead>())
{
    float effectiveFireRate = shootConfig.ValueRO.BaseFireRate * modifiers.ValueRO.FireRateMultiplier;
    shootConfig.ValueRW.TimeSinceLastShot += deltaTime;

    if (shootConfig.ValueRW.TimeSinceLastShot >= effectiveFireRate)
    {
        shootConfig.ValueRW.TimeSinceLastShot = 0f;
        int missileCount = shootConfig.ValueRO.BaseMissileCount + modifiers.ValueRO.BonusMissileCount;
        for (int i = 0; i < missileCount; i++) { /* ë¯¸ì‚¬ì¼ ë°œì‚¬ */ }
    }
}
```

#### BulletHitSystem ë°ë¯¸ì§€ ê³„ì‚°

```csharp
float finalDamage = baseDamage * modifiers.DamageMultiplier;

if (modifiers.CriticalChance > 0f && random.NextFloat(0f, 100f) < modifiers.CriticalChance)
{
    finalDamage *= modifiers.CriticalMultiplier;
    // ì¹˜ëª…íƒ€ ì´í™íŠ¸ RPC ì „ì†¡
}
enemyHealth.ValueRW.Value -= finalDamage;
```

---

### 10.9 ë²„í”„ ë°ì´í„° ì„¤ì • (ScriptableObject)

```csharp
// Assets/Scripts/Buffs/Data/BuffDefinitionSO.cs
[CreateAssetMenu(fileName = "BuffDefinition", menuName = "Buffs/Buff Definition")]
public class BuffDefinitionSO : ScriptableObject
{
    public BuffType BuffType;
    public StatType TargetStat;
    public string DisplayName;
    public string Description;
    public Sprite Icon;
    public float[] LevelValues = new float[5];
    public ModifierType ModifierType = ModifierType.Multiplicative;
}

// Assets/Scripts/Buffs/Data/BuffDatabaseSO.cs
[CreateAssetMenu(fileName = "BuffDatabase", menuName = "Buffs/Buff Database")]
public class BuffDatabaseSO : ScriptableObject
{
    public BuffDefinitionSO[] Buffs;
    private Dictionary<BuffType, BuffDefinitionSO> _lookup;

    public void Initialize() => _lookup = Buffs.ToDictionary(b => b.BuffType);
    public BuffDefinitionSO GetDefinition(BuffType type) =>
        _lookup.TryGetValue(type, out var def) ? def : null;
}
```

---

### 10.10 í™•ì¥ ê°€ì´ë“œ: ìƒˆ ë²„í”„ ì¶”ê°€ ë°©ë²•

| Step | ì‘ì—… | ì„¤ëª… |
|------|-----|------|
| 1 | BuffType enum ì¶”ê°€ | `Shield = 8` |
| 2 | StatType ì¶”ê°€ (í•„ìš”ì‹œ) | `ShieldAmount = 40` |
| 3 | íš¨ê³¼ í´ë˜ìŠ¤ êµ¬í˜„ | `ShieldBuffEffect : BuffEffectBase` |
| 4 | BuffRegistry ë“±ë¡ | `Register(new ShieldBuffEffect())` |
| 5 | PlayerBuffLevels í•„ë“œ ì¶”ê°€ | `[GhostField] public int ShieldLevel` |
| 6 | StatModifiers í•„ë“œ ì¶”ê°€ | `[GhostField] public float ShieldAmount` |
| 7 | í•´ë‹¹ ì‹œìŠ¤í…œ ìˆ˜ì • | `ShieldDamageSystem`ì—ì„œ ì²˜ë¦¬ |

---

### 10.11 ì‹œìŠ¤í…œ ì‹¤í–‰ ìˆœì„œ

```
Frame Start
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BuffLevelChangeSystem             â”‚ â† RPC ì²˜ë¦¬, ë ˆë²¨ ì—…ë°ì´íŠ¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  StatCalculationSystem             â”‚ â† ë²„í”„ ë ˆë²¨ â†’ StatModifiers
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HealthRegenSystem                 â”‚ â† ì²´ë ¥ ì¬ìƒ ì ìš©
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Game Logic Systems                â”‚ â† ë²„í”„ ì ìš©ëœ ìŠ¤íƒ¯ ì‚¬ìš©
â”‚  - AutoShootSystem                 â”‚
â”‚  - PlayerMovementSystem            â”‚
â”‚  - MagnetSystem                    â”‚
â”‚  - BulletHitSystem                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
Frame End
```

---

### 10.12 ì¥ì  ìš”ì•½

| ì›ì¹™ | êµ¬í˜„ ë°©ë²• | ì´ì  |
|-----|----------|-----|
| **ë‹¨ì¼ ì±…ì„ (SRP)** | ê° ë²„í”„ = ë…ë¦½ëœ í´ë˜ìŠ¤ | ë²„í”„ ìˆ˜ì • ì‹œ ë‹¤ë¥¸ ë²„í”„ ì˜í–¥ ì—†ìŒ |
| **ê°œë°©-íì‡„ (OCP)** | IBuffEffect + BuffRegistry | ìƒˆ ë²„í”„ ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš” |
| **ì˜ì¡´ì„± ì—­ì „ (DIP)** | ì¸í„°í˜ì´ìŠ¤ ì˜ì¡´ | êµ¬ì²´ êµ¬í˜„ êµì²´ ìš©ì´ |
| **ë°ì´í„° ì£¼ë„** | ScriptableObject ë¶„ë¦¬ | ë°¸ëŸ°ì‹± ì‹œ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš” |
| **ECS í˜¸í™˜** | StatModifiers + Burst | ê³ ì„±ëŠ¥ + ë„¤íŠ¸ì›Œí¬ ë™ê¸°í™” |

---

## 11. í™•ì¥ ê°€ëŠ¥ì„±

- **ë²„í”„ íƒ€ì… ì¶”ê°€**: BuffType enumì— ì¶”ê°€ë§Œ í•˜ë©´ ë¨
- **ì‹œë„ˆì§€ íš¨ê³¼**: íŠ¹ì • ë²„í”„ ì¡°í•© ì‹œ ì¶”ê°€ íš¨ê³¼
- **í¬ê·€ ë²„í”„**: ë‚®ì€ í™•ë¥ ë¡œ ë“±ì¥í•˜ëŠ” ê°•ë ¥í•œ ë²„í”„
- **ì €ì£¼ ë²„í”„**: ë‹¨ì ì´ ìˆì§€ë§Œ ê°•ë ¥í•œ íš¨ê³¼
- **ë¬´í•œ ë ˆë²¨**: ë ˆë²¨ 6+ ì‹œ íš¨ê³¼ ì¦ê°€í­ ê°ì†Œí•˜ë©° ë¬´í•œ ì„±ì¥
